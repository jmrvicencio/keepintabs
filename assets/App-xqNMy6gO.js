import{r as a,j as e,u as g,a as N,R as f,b as p,L as D,N as O,c as C,O as M}from"./index-D63cc4uB.js";import{d as T}from"./dataFetched-C1XQfnbQ.js";import{P as E,M as k}from"./mainArea-FTWU3UJ5.js";import{u as x,a as I,b as w,c as F}from"./useDebug-BhBm4-hj.js";import{c as L}from"./createLucideIcon-YKtzb1R1.js";import{P as y}from"./plus-DxiqG4FC.js";import{U as z,b as U}from"./buttonHandleKeypress-CRX4_Un4.js";import{u as S}from"./usePopupOverlay-Be4litxu.js";import{X as _}from"./x-dbg4EVY4.js";import"./react-gH-7aFTg.js";import"./firebase-wjis4Syq.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$=L("log-out",H),P=a.memo(({onClick:o=s=>{},className:t,children:n})=>e.jsx("div",{className:t,children:e.jsx(E,{onClick:o,className:"flex flex-row text-white",bgColor:"bg-accent-600",dropOnClick:!0,children:n})})),j=w(!1),B=w(null,(o,t,n)=>{t(T,s=>{const l={...s};return l.fetched=n,l})});function V(){const o=g(),[t,n]=x(j),s=t?"show-sidebar":"",l=I(B),{group:c}=N(),r=()=>{p.signOut(),n(!1),l(!1),o(f.LANDING)},u=m=>{o(f.NEW_TRANSACTION,{state:{groupId:c}})};return a.memo(()=>e.jsx("div",{onClick:()=>n(!1),className:"fixed inset-0 z-10 h-full bg-[#2F231D]/80 md:hidden"})),e.jsxs("div",{className:`${s} bg-wheat-200 top-0 z-20 w-[0dvw] max-w-4/5 shrink-0 transition-[width] duration-300 ease-in-out md:sticky md:h-fit md:w-64 md:pt-12 not-md:[.show-sidebar]:w-72`,children:[e.jsxs("div",{className:"flex w-[60dvw] flex-row items-center justify-baseline gap-2 p-4",onClick:r,children:[e.jsx($,{className:"h-4 w-4"}),"Sign Out"]}),e.jsx("div",{className:"flex w-[60dvw] flex-row items-center justify-baseline gap-2 p-4",onClick:()=>{n(!1),o(f.TEST)},children:"Navigate to Test"}),e.jsx("div",{className:"p-4",children:e.jsxs(P,{className:"hidden md:block",onClick:u,children:[e.jsx(y,{}),"Add Transaction"]})})]})}function W({children:o}){const[t,n]=a.useState(null),[s,l]=a.useState(!0);return a.useEffect(()=>{async function c(){await p.authStateReady(),l(!1),n(p.currentUser)}c()}),s?e.jsx("div",{className:"bg-wheat-200 text-cream flex h-dvh w-dvw items-center justify-center bg-[url(/bg/bg_pattern.png)]",children:e.jsx(D,{className:"fill-wheat-400 h-20 animate-pulse"})}):t&&t.uid==="NgjgtqXPihQSLQfhb2Slc8POVkm1"?o:e.jsx(O,{to:"/",replace:!0})}function Y({handleClick:o,className:t}){return e.jsxs("div",{className:"relative h-7 w-7 cursor-pointer "+t,onClick:o,children:[e.jsx("div",{className:"h-full w-full overflow-clip rounded-md border-1 bg-white",children:p.currentUser&&p.currentUser.photoURL?e.jsx("div",{className:"h-full w-full bg-cover",style:{backgroundImage:`url(${p.currentUser.photoURL})`}}):e.jsx("div",{className:"bg-accent-200 flex h-full w-full items-center justify-center p-0.5",children:e.jsx(z,{className:"text-ink-800/70 w-full stroke-white"})})}),e.jsx("div",{className:"absolute -right-0.5 -bottom-0.5 z-[-1] h-full w-full rounded-md border-1 border-black bg-black"})]})}const X=a.memo(function(){const t=g(),[n,s]=x(j),l=a.memo(()=>e.jsx(Y,{className:"md:hidden",handleClick:()=>s(!0)})),c=()=>{t(f.APP)};return e.jsxs("header",{className:"flex flex-row justify-between px-3 py-4",children:[e.jsxs("div",{id:"header",className:"flex cursor-pointer items-center",onClick:c,children:[e.jsxs("svg",{className:"fill-accent-600 h-9",viewBox:"0 0 120 141",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M30 37.2C30 33.2236 33.2235 30 37.2 30H46.8C50.7764 30 54 33.2236 54 37.2V103.8C54 107.776 50.7764 111 46.8 111H37.2C33.2235 111 30 107.776 30 103.8V37.2Z"}),e.jsx("path",{d:"M60 96C60 87.7157 66.7157 81 75 81C83.2843 81 90 87.7157 90 96V108.333C90 109.806 88.8061 111 87.3333 111H75C66.7157 111 60 104.284 60 96Z"}),e.jsx("path",{d:"M72 54C78.6274 54 84 59.3726 84 66C84 72.6274 78.6274 78 72 78H62.1333C60.9551 78 60 77.0449 60 75.8667V66C60 59.3726 65.3726 54 72 54Z"})]}),e.jsx("p",{className:"font-outfit text-xl",children:"Keepin' Tabs"})]}),e.jsx(l,{})]})});function K({showDebug:o=!1}){const[t,n]=a.useState([]),[s,l]=a.useState([12,12]),[c,r]=a.useState(s),{options:u}=F(),m={top:`${s[1]}px`,left:`${s[0]}px`},d=i=>{n([i.clientX,i.clientY]),r(s)},b=i=>{if(i.buttons!=1)return;const h=[c[0]+(i.clientX-t[0]),c[1]+(i.clientY-t[1])];l(h)};return e.jsx("div",{style:m,className:`${!o&&"hidden"} bg-accent-200/60 absolute z-20 p-4`,onMouseDown:d,onMouseMove:b,children:Object.entries(u).map(([i,h])=>e.jsx(Z,{text:i,action:h},i))})}const Z=({text:o,action:t})=>e.jsx("p",{onClick:t,children:o}),q=({popup:o})=>{const t=a.useRef(null),[n]=x(k),s=o.reference?.current?.getBoundingClientRect(),l=n?.current,c=t.current?.getBoundingClientRect();n?.current?.getBoundingClientRect();const r=12,[u,m]=a.useState({top:(s?.bottom??0)+(n?.current?.scrollTop??0)}),d={top:l?.scrollTop??0,bottom:(l?.scrollTop??0)+window.innerHeight,right:window.innerWidth};a.useLayoutEffect(()=>{const i=(c?.bottom??0)+r<d.bottom;m(i?{top:(s?.bottom??0)+r}:{bottom:0+r})},[o.reference,t.current,n?.current]);const b=i=>{i.stopPropagation()};return e.jsx("div",{ref:t,style:{...u,right:d.right-(s?.right??0)},className:"absolute flex min-w-40 flex-col gap-2 rounded-sm bg-white p-4",onClick:b,children:o.options.map((i,h)=>a.createElement("div",{...U(i.action),key:h,className:"cursor-pointer"},i.label))})},G=()=>{const o=C(),{showPopup:t,setShowPopup:n,popup:s}=S();a.useEffect(()=>{n(!1)},[o.pathname]);const l=r=>{r.stopPropagation()},c=()=>{n(!1),s.closeCallback&&s.closeCallback()};return t?s.type=="popup-overlay"?e.jsx("div",{"data-testid":"popup-overlay",className:"absolute z-40 flex h-dvh w-dvw items-center justify-center bg-black/70 px-2",id:"testing",onClick:c,children:e.jsxs("div",{"data-testid":"popup-menu",className:"w-100 rounded-2xl border border-black bg-white",onClick:l,children:[e.jsxs("div",{className:"border-ink-300/40 relative flex items-center justify-center border-b p-4 font-semibold",children:[s.title,e.jsx("div",{className:"bg-accent-200 absolute right-2 cursor-pointer rounded-xl border p-1",onClick:c,children:e.jsx(_,{})})]}),e.jsx("div",{className:"p-4",children:s.body})]})}):e.jsx("div",{"data-testid":"popup-overlay",className:"absolute inset-0 z-40 bg-black/70",onClick:c,children:e.jsx(q,{popup:s})}):e.jsx(e.Fragment,{})},re=w(!1);function de(){S();const o=g(),t=a.useRef(null),[n,s]=x(k),[l,c]=a.useState(!1),[r,u]=x(j),{group:m}=N(),d=C(),b=a.memo(()=>e.jsx(y,{})),i=d.pathname!=f.NEW_GROUP;console.log("pathname:",d.pathname),a.useEffect(()=>{s(t)},[]),a.useEffect(()=>{u(!1)},[d]);const h=v=>{v.key==="`"&&c(!l)},R=v=>{o(f.NEW_TRANSACTION,{state:{groupId:m}})},A=a.memo(()=>e.jsx("div",{onClick:()=>u(!1),className:"fixed inset-0 z-10 h-full bg-[#2F231D]/80 md:hidden"}));return e.jsxs(W,{children:[e.jsx(G,{}),e.jsxs("div",{className:"bg-wheat-200 text-ink-800 font-outfit relative z-0 flex h-dvh w-full justify-end overflow-x-hidden overflow-y-auto md:justify-center",onKeyDown:h,tabIndex:0,children:[e.jsx(K,{showDebug:l}),e.jsxs("div",{className:"relative h-full min-w-dvw md:w-full md:max-w-190 md:min-w-0",children:[r&&e.jsx(A,{}),e.jsxs("div",{ref:t,className:`${r&&"sidebar"} relative flex h-full w-full flex-col overflow-y-auto md:h-fit not-md:[.sidebar]:overflow-y-hidden`,children:[e.jsx(X,{}),e.jsx(M,{})]}),i&&e.jsxs(P,{className:`${d.pathname==f.NEW_TRANSACTION?"hidden":""} absolute bottom-6 left-1/2 z-5 w-fit -translate-x-1/2 md:hidden`,onClick:R,children:[e.jsx(b,{}),"Add Transaction"]})]}),e.jsx("div",{className:"absolute inset-0 z-[-1] bg-[url(/bg/bg_pattern.png)] select-none"}),e.jsx("div",{className:"absolute top-0 right-0 z-[-1] aspect-square h-50 bg-[url(/bg/bg_top.svg)] bg-contain bg-top-right bg-no-repeat"}),e.jsx(V,{})]})]})}export{re as dataFetchedAtom,de as default};
