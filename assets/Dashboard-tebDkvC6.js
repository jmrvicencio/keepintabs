import{c as N,a as k,j as e,b as l,r as g,u as I,l as C,s as M}from"./index-BOGKdexF.js";import{p as D,q as S,t as E,u as P,w as R,x as G,y as $,z as A,A as L,B as p,D as j}from"./firebase-D3NvwVPU.js";import"./react-gH-7aFTg.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],H=N("plus",_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],V=N("user",T),i=D(k,{localCache:S({tabManager:E()})});console.log("using firestore emulator"),P(i,"localhost",8080);const n=[];for(let s=0;s<256;++s)n.push((s+256).toString(16).slice(1));function q(s,r=0){return(n[s[r+0]]+n[s[r+1]]+n[s[r+2]]+n[s[r+3]]+"-"+n[s[r+4]]+n[s[r+5]]+"-"+n[s[r+6]]+n[s[r+7]]+"-"+n[s[r+8]]+n[s[r+9]]+"-"+n[s[r+10]]+n[s[r+11]]+n[s[r+12]]+n[s[r+13]]+n[s[r+14]]+n[s[r+15]]).toLowerCase()}let m;const B=new Uint8Array(16);function O(){if(!m){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");m=crypto.getRandomValues.bind(crypto)}return m(B)}const z=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),w={randomUUID:z};function b(s,r,x){if(w.randomUUID&&!s)return w.randomUUID();s=s||{};const t=s.random??s.rng?.()??O();if(t.length<16)throw new Error("Random bytes length must be >= 16");return t[6]=t[6]&15|64,t[8]=t[8]&63|128,q(t)}function F({handleClick:s}){return e.jsx("div",{className:"h-7 w-7 cursor-pointer overflow-clip rounded-md bg-white/10",onClick:s,children:l.currentUser&&l.currentUser.photoURL?e.jsx("img",{src:l.currentUser.photoURL,className:"w-full"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center p-0.5",children:e.jsx(V,{className:"w-full"})})})}function h(){return e.jsx("div",{className:"bg-charcoal-700 border-charcoal-800 h-5 w-5 rounded-full border-1 not-first:-ml-1"})}function K(){return e.jsxs("div",{className:"bg-charcoal-800 flex w-full cursor-pointer flex-col gap-2 rounded-xl p-1",children:[e.jsxs("div",{className:"text-sand flex flex-row items-center justify-between px-2",children:[e.jsx("p",{className:"font-medium",children:"Coffee with the Boys"}),e.jsxs("div",{className:"border-charcoal-600 flex flex-row items-center rounded-full border-1 p-1 pl-2",children:[e.jsx("p",{className:"font-noto-sans mr-2 align-top text-base/4",children:"1"}),e.jsx(h,{}),e.jsx(h,{}),e.jsx(h,{})]})]}),e.jsxs("div",{className:"bg-charcoal-700 flex w-full flex-row justify-between gap-2 rounded-lg p-2",children:[e.jsx("div",{className:"bg-accent-200 w-2 rounded-xs"}),e.jsx("p",{className:"grow-1 text-left",children:"You Owe"}),e.jsx("p",{className:"font-noto-sans text-accent-200",children:"PHP 4,260.00"})]})]})}function Y({children:s}){return e.jsx("div",{className:"bg-accent-600 flex h-7 w-fit cursor-pointer items-center rounded-xl px-3",children:s})}function X(){const[s,r]=g.useState([]);g.useEffect(()=>{async function a(){const c=R($(i,"groupMembers"),G("userId","==",l.currentUser.uid)),d=[...(await A(c)).docs].map(o=>({id:o.id,groupId:o.data().groupId})),u=await Promise.all(d.map(o=>L(p(i,`groups/${o.groupId}`))));u.forEach(o=>console.log(o.data())),r(u)}a()},[]),s.forEach(a=>console.log("document: ",a.data()));const[x,t]=I(M),y=()=>{t(!x)},v=()=>{t(!1)},U=()=>{const a=prompt("New Group Name");if(a===""||!a)return alert("Please enter a name for the group");const c=b(),f=l.currentUser.uid,d=b(),u=p(i,`groups/${c}`),o=p(i,`groupMembers/${l.currentUser.uid}_${c}`);j(u,{name:a,inviteKey:d}),j(o,{userId:f,groupId:c,inviteKey:d})};return e.jsxs("div",{className:"relative flex w-dvw shrink-0 flex-col gap-8 p-3",children:[x&&e.jsx("div",{className:"absolute inset-0 h-full w-full bg-black/60",onClick:v}),e.jsxs("header",{className:"flex flex-row justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:C,className:"h-9"}),e.jsx("p",{className:"font-outfit text-xl",children:"Keepin' Tabs"})]}),e.jsx(F,{handleClick:y})]}),e.jsxs("main",{className:"flex flex-col items-start gap-8",children:[e.jsxs("section",{className:"flex flex-col items-start gap-1",children:[e.jsx("h1",{className:"font-noto-sans text-sand text-4xl font-medium",children:"Debts Clear!"}),e.jsx("p",{children:"No outstanding balance"})]}),e.jsxs("section",{className:"w-full",children:[e.jsxs("div",{className:"mb-4 flex flex-row gap-2",children:[e.jsx("p",{className:"font-normal",children:"Groups"}),e.jsx(Y,{children:e.jsx(H,{className:"w-4",onClick:U})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(K,{}),e.jsxs("div",{className:"border-charcoal-700 flex w-full cursor-pointer flex-col gap-2 rounded-xl border-1 p-1",children:[e.jsx("div",{className:"text-sand flex flex-row items-center justify-between px-2",children:e.jsx("p",{className:"font-medium",children:"Non Grouped Expenses"})}),e.jsxs("div",{className:"bg-charcoal-500 flex w-full flex-row justify-between gap-2 rounded-lg p-2",children:[e.jsx("div",{className:"bg-accent-200 w-2 rounded-xs"}),e.jsx("p",{className:"grow-1 text-left",children:"You Owe"}),e.jsx("p",{className:"font-noto-sans text-accent-200",children:"PHP 4,260.00"})]})]})]})]})]})]})}export{X as default};
